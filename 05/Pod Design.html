<!DOCTYPE html>
<!-- saved from url=(0076)https://cloud-native-labs.s3.ap-south-1.amazonaws.com/dancing-hippo/05.html# -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Pod Design</title>
  <script src="./Pod Design_files/clipboard.min.js"></script>
  <script src="./Pod Design_files/jquery-3.5.1.min.js"></script>
  <script src="./Pod Design_files/clipboard.min.js"></script>
  <script src="./Pod Design_files/velocity.min.js"></script>
  <link rel="stylesheet" href="./Pod Design_files/font-awesome.min.css">
<style>
/* Based on Flatly from Bootswatch (https://bootswatch.com/flatly/) */
@import url("//fonts.googleapis.com/css?family=Lato:400,700,400italic");

/* document body (contains all content) */
body {
  font-family: "Lato", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 15px;
  line-height: 1.42857143;
  color: #2c3e50;
  background-color: #ffffff;
  margin-left: 10%;
  margin-right: 10%;
}

/* document header (contains title etc) */
#header {
  width: 100%;
}
#header>h1 {
  border-bottom: 1px solid #ddddd8;
  padding-bottom: 8px;
}

/* headings */
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family: "Lato", "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-weight: 400;
  line-height: 1.1;
  color: inherit;
}
h1,
h2,
h3 {
  margin-top: 21px;
  margin-bottom: 10.5px;
}
h4,
h5,
h6 {
  margin-top: 10.5px;
  margin-bottom: 10.5px;
}
h1 {
  font-size: 3em; 
/*   font-size: 39px;  */
}
h2 {
  font-size: 32px;
}
h3 {
  font-size: 26px;
}
h4 {
  font-size: 19px;
}
h5 {
  font-size: 15px;
}
h6 {
  font-size: 13px;
}

/* plain paragraph text */
.paragraph {
/*   font-family: sans-serif; */
  margin: 0 0 10.5px;
}
p {
/*   font-family: sans-serif; */
  margin: 0 0 10.5px;
}

/* blockquote text */
.quoteblock {
  font-style: italic;
}
blockquote {
  padding: 10.5px 21px;
  margin: 0 0 21px;
  font-size: 18.75px;
  border-left: 5px solid #ecf0f1;
}
blockquote p:last-child,
blockquote ul:last-child,
blockquote ol:last-child {
  margin-bottom: 0;
}
.blockquote-reverse,
blockquote.pull-right {
  padding-right: 15px;
  padding-left: 0;
  border-right: 5px solid #ecf0f1;
  border-left: 0;
  text-align: right;
}
.blockquote-reverse footer:before,
blockquote.pull-right footer:before,
.blockquote-reverse small:before,
blockquote.pull-right small:before,
.blockquote-reverse .small:before,
blockquote.pull-right .small:before {
  content: '';
}
.blockquote-reverse footer:after,
blockquote.pull-right footer:after,
.blockquote-reverse small:after,
blockquote.pull-right small:after,
.blockquote-reverse .small:after,
blockquote.pull-right .small:after {
  content: '\00A0 \2014';
}

/* blockquote attribution text */
.attribution,
.cite,
blockquote footer,
blockquote small,
blockquote .small {
  display: block;
  font-size: 80%;
  line-height: 1.42857143;
  color: #b4bcc2;
}
.attribution:before,
blockquote footer:before,
blockquote small:before,
blockquote .small:before {
  content: '\2014 \00A0';
}

/* unordered list */
ul, ol {
  margin-top: 0;
  margin-bottom: 10.5px;
}
ul ul,
ol ul,
ul ol,
ol ol {
  margin-bottom: 0;
}


/* links */
a {
  color: #18bc9c;
  background-color: transparent;
  text-decoration: none;
}
a:hover,
a:focus {
  color: #18bc9c;
  text-decoration: underline;
}
a:focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}

/* horizontal rules */
hr {
  margin-top: 21px;
  margin-bottom: 21px;
  border: 0;
  border-top: 1px solid #ecf0f1;
}

/* table */
table {
  background-color: transparent;
  width: 100%;
  max-width: 100%;
  margin-bottom: 21px;
  border-collapse: collapse;
}
table col[class*="col-"] {
  position: static;
  float: none;
  display: table-column;
}
table td[class*="col-"],
table th[class*="col-"] {
  position: static;
  float: none;
  display: table-cell;
}

/* table caption */
caption {
  padding-top: 8px;
  padding-bottom: 8px;
  color: #b4bcc2;
  text-align: left;
}

/* table header row */
thead {
  border-bottom: 2px solid #ecf0f1;
}

/* table header cell */
th {
  text-align: left;
  padding-left: 8px;
}

/* table footer */
tfoot {
  color: #807F81;
  border-top: 1px solid #ecf0f1;
}

/* table cell */
td {
  border-top: 1px solid #ecf0f1;
}
td p {
  margin: auto;
  padding: 8px;
}

/* table body */
tbody > tr:nth-of-type(odd) {
  background-color: #f9f9f9;
}
tbody > tr:hover {
  background-color: #ecf0f1;
}

/* inline code */
code,
kbd,
pre,
samp {
  font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
}
code {
  padding: 2px 4px;
  font-size: 90%;
  color: #c7254e;
  background-color: #f9f2f4;
  border-radius: 4px;  
}
kbd {
  padding: 2px 4px;
  font-size: 90%;
  color: #ffffff;
  background-color: #333333;
  border-radius: 0;
  -webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
          box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
}
kbd kbd {
  padding: 0;
  font-size: 100%;
  font-weight: bold;
  -webkit-box-shadow: none;
          box-shadow: none;
}
pre {
  display: block;
  padding: 10.5px;
  margin: 0 0 10.5px;
  font-size: 15px;
  line-height: 1.42857143;
  word-break: break-all;
  word-wrap: break-word;
  color: #333333;
  background-color: #f5f5f5;
  border: 1px solid #cccccc;
  border-radius: 4px;
}
pre code {
  padding: 0;
  font-size: inherit;
  color: inherit;
  white-space: pre-wrap;
  background-color: transparent;
  border-radius: 0;
}

/* image */
img {
  max-width: 100%;
  vertical-align: middle;
}

/* footer section */
#footer {
  margin-top: 22px;
  padding: 14px 16px;
  color: white;
  background-color: #2c3e50;
}

/* responsiveness fixes */
video {
  max-width: 100%;
}

/* table of Contents sidebar */
#toctitle {
  color: #ffffff;
}

#toc ul {
  display: inline;
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

#toc li {
  display: block;
}

#toc a {
  background-color: #2c3e50;
  float: left;
  color: white;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

#toc li a:hover {
  background-color: #1a242f;
  text-decoration: none;
}

#toc:after {
  content: " ";
  visibility: hidden;
  display: block;
  height: 0;
  clear: both;
}

@media all and (max-width: 600px) {
table {
  width: 55vw!important;
  font-size: 3vw;
}

</style>
<link rel="stylesheet" href="./Pod Design_files/font-awesome.min(1).css">
</head>
<body class="article">
<div id="header">
<h1>Pod Design</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This lab consists of a list of exercises to demonstrate and understand
the most commonly used kubernetes commands and concepts to ramp up your kubernetes competency skills.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_learning_outcomes">Learning Outcomes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>After completing the lab, you will be able to understand and use Kubernetes concepts related to the below topics:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Labels, Selectors, Annotations</p>
</li>
<li>
<p>Deployments</p>
</li>
<li>
<p>Services</p>
</li>
<li>
<p>Persistent Volumes</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_start_the_minikube">Start the minikube</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start minikube locally
<code>minikube start --driver=virtualbox</code></p>
</li>
<li>
<p>Verify the kubectl context <code>kubectl config get-contexts</code> is set to minikube. If not, set it to minikube <code>kubectl config use-context minikube</code></p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tbody><tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Create all manifest resources in the directory <code>~/workspace/kubernetes-manifests/competencies</code>. Watch out for the right file names in the solution section.</p>
</div>
</td>
</tr>
</tbody></table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_pod_design">Pod Design</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_labels_selectors_and_annotations">Labels, Selectors and Annotations</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Add a label <code>tier=service</code> to the pages application and display the label</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/1.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
    <span style="color:#606">tier</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">service</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/pages:1.0</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/1.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po pages --show-labels</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Create a pod nginx and add a label <code>tier=frontend</code></p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/2.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
    <span style="color:#606">tier</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">frontend</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: nginx</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/2.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po nginx --show-labels</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Get all the pods with label <code>tier=frontend</code></p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po -l tier=frontend --show-labels</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Fetch and delete all the pods which has label tier set to any value</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po -l tier --show-labels
kubectl delete po -l tier</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Annotate nginx pod with annotation <code>team=yourteam</code> and <code>course=k8s</code></p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/3.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">annotations</span>:
    <span style="color:#606">team</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">yourteam</span></span>
    <span style="color:#606">course</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">k8s</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: nginx</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/3.yaml
kubectl describe po nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po nginx -o jsonpath='{.metadata.annotations.course}'
kubectl get po nginx -o jsonpath='{.metadata.annotations.team}'</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_deployments">Deployments</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create pages deployment with 2 replicas using yaml manifest file</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/4.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apps/v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Deployment</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">replicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">2</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
  <span style="color:#606">strategy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">labels</span>:
        <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">containers</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/pages:1.0</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
        <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/4.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Verify the first version of deployment has been deployed and rolled out</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl rollout status deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Update the manifest to use 3 replicas and set the image to <code>dellcloud/pages:service</code></p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/5.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apps/v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Deployment</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">replicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">3</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
  <span style="color:#606">strategy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">labels</span>:
        <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">containers</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/pages:service</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">pages</span></span>
        <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/5.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Verify the second version of deployment has been deployed and rolled out</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl rollout status deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl rollout history deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl rollout history deployment pages --revision=2</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Rollback to the previous version. Notice the change by inspecting the deployment &amp; the revision number</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl describe deployment pages | grep -i image
kubectl rollout undo deployment pages
kubectl describe deployment pages | grep -i image
kubectl rollout history deployment pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Manually scale out/up to use 5 replicas and inspect the number of pods.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl scale deployment pages --replicas=5
kubectl get po -w</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Manually scale in/down to use 1 replicas and inspect the number of pods.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl scale deployment pages --replicas=1
kubectl get po -w</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete deploy pages</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_services">Services</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Before starting the next set of exercises, create the directory <code>services</code> inside <code>competencies</code></p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">mkdir ~/workspace/kubernetes-manifests/competencies/services</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</li>
<li>
<p>Create a service which routes the request to <code>nginx</code> pod using selectors in the yaml file.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/pod-design/2.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
    <span style="color:#606">tier</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">frontend</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: nginx</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/1.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Service</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">ports</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">port: 8080</span></span>
    <span style="color:#606">protocol</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">TCP</span></span>
    <span style="color:#606">targetPort</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">80</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
    <span style="color:#606">tier</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">frontend</span></span>
  <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ClusterIP</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/1.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/pod-design/2.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get svc nginx -o wide
kubectl get ep
kubectl get po nginx --show-labels</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl port-forward svc/nginx 8080:8080</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">curl localhost:8080</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete svc nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Create a service (color) of type <code>nodeport</code> and expose <code>port 8080</code> and <code>target port 80</code>, with the selector app=colorful. Create appropriate <code>nginx</code> pod to be accessible by the service.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/2-pod.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: nginx</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/2.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Service</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">color</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">ports</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">port: 8080</span></span>
    <span style="color:#606">protocol</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">TCP</span></span>
    <span style="color:#606">targetPort</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">80</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">NodePort</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/2.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/2-pod.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get svc color -o wide
kubectl get ep
kubectl get po nginx --show-labels</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl port-forward svc/color 8080:8080</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">curl localhost:8080</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete svc color</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Create a service named <code>nginx</code> of type <code>NodePort</code> which routes the traffic to any pod which has the label <code>app=colorful</code> exposing <code>target port 80</code> on <code>port 80</code>.
The service  does not route traffic to any pods yet. We shall use it in later exercises.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">mkdir -p ~/workspace/kubernetes-manifests/competencies/services/green</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/green/service.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Service</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">NodePort</span></span>
  <span style="color:#606">ports</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">port: 80</span></span>
    <span style="color:#606">protocol</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">TCP</span></span>
    <span style="color:#606">targetPort</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">80</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/green/service.yaml

kubectl get svc nginx
kubectl get ep</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Create a <code>nginx-green</code> pod deriving from <code>nginx</code> image, which prints a custom message <code>Green</code> (HINT::  echo Green &gt; /usr/share/nginx/html/index.html) instead of its original message, having the label <code>app=colorful</code> &amp; Create a <code>nginx-blue</code> pod deriving from <code>nginx</code> image, which prints a custom message <code>Blue</code> (HINT:: echo Blue &gt; /usr/share/nginx/html/index.html) instead of its original message having the label <code>app=colorful</code>
Make multiple requests to the <code>nginx</code> service created in the previous exercise and ensure that the service is routing requests between the two different pods.
Delete the pods and services before moving on to the next exercise.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">cd ~/workspace/kubernetes-manifests/competencies/services/green</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/green/Dockerfile</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">FROM nginx:latest
RUN echo Green &gt; /usr/share/nginx/html/index.html</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">docker build -t [docker-username]/nginx:green .
docker push [docker-username]/nginx:green</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">mkdir ~/workspace/kubernetes-manifests/competencies/services/blue
cd ~/workspace/kubernetes-manifests/competencies/services/blue</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/blue/Dockerfile</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">FROM nginx:latest
RUN echo Blue &gt; /usr/share/nginx/html/index.html</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">docker build -t [docker-username]/nginx:blue .
docker push [docker-username]/nginx:blue</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/green/pod.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx-green</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/nginx:green</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx-green</span></span>
    <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/blue/pod.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx-blue</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">containers</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/nginx:blue</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx-blue</span></span>
    <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/green/pod.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/blue/pod.yaml

kubectl get all</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get svc nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>The next set of instructions are provided for minikube. But if you want to run it on production cluster
you will have to provide appropriate security policies for inbound access on the node port</strong></p>
</div>
<div class="paragraph">
<p><strong>Copy the 5 digit NODEPORT under the column PORT(S)</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get nodes -o wide</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Copy the INTERNAL-IP </strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">curl http://INTERNAL-IP:NODEPORT
**Run the command for a few times to understand the concept of kubernetes service discovery**</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Clean up </strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po -l app=colorful
kubectl delete svc -l app=colorful</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Create 2 deployments of the nginx application from the previous exercise. The first deployment is <code>nginx-blue</code> application, scaled to 3 replicas, and the second deployment is a single replica of <code>nginx-green</code> application.
Create the service, which will forward network requests to any pod with the label <code>app=colorful</code></p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">cd ~/workspace/kubernetes-manifests/competencies/services/green</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/green/deployment.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apps/v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Deployment</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">replicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">labels</span>:
        <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">containers</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/nginx:green</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
        <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/services/blue/deployment.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">apps/v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Deployment</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">replicas</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">3</span></span>
  <span style="color:#606">selector</span>:
    <span style="color:#606">matchLabels</span>:
      <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
  <span style="color:#606">template</span>:
    <span style="color:#606">metadata</span>:
      <span style="color:#606">labels</span>:
        <span style="color:#606">app</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">colorful</span></span>
    <span style="color:#606">spec</span>:
      <span style="color:#606">containers</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: dellcloud/nginx:blue</span></span>
        <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">nginx</span></span>
        <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/green/deployment.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/blue/deployment.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Let’s reuse the service created in the previous exercise as it serves our purpose</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/services/green/service.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get all --show-labels
kubectl get svc nginx</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Copy the 5 digit NODEPORT under the column PORT(S)</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get nodes -o wide</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Copy the INTERNAL-IP </strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">curl http://INTERNAL-IP:NODEPORT</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Run the command few times and watch how the Kubernetes service automatically load balances our request between the running pods</strong></p>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_persistent_volumes">Persistent Volumes</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a Persistent Volume which is used as a long term storage solution. Create a Persistent Volume Claim to use the persistent volume. Create a pod that defines an application container which writes the current date to a log file every five seconds and this pod will eventually use persistent volume claim when mounting the log file to persistent volume.</p>
<details>
<summary class="title">Click to see solution</summary>
<div class="content">
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/volumes/pv-1.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">PersistentVolume</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">log-pv-[student-name]</span></span>
  <span style="color:#606">labels</span>:
    <span style="color:#606">type</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">local</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">storageClassName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">document</span></span>
  <span style="color:#606">capacity</span>:
    <span style="color:#606">storage</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1Gi</span></span>
  <span style="color:#606">accessModes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ReadWriteMany</span></span>
  <span style="color:#606">hostPath</span>:
    <span style="color:#606">path</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">"</span><span style="color:#D20">/etc/kal-directory</span><span style="color:#710">"</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/volumes/pvc-1.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">PersistentVolumeClaim</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">log-pvc-[student-name]</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">storageClassName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">document</span></span>
  <span style="color:#606">accessModes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ReadWriteMany</span></span>
  <span style="color:#606">resources</span>:
    <span style="color:#606">requests</span>:
      <span style="color:#606">storage</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">1Gi</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="paragraph">
<p><code>~/workspace/kubernetes-manifests/competencies/volumes/pod-1.yaml</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alpine</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alpine</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">volumes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: log-date-vol</span></span>
      <span style="color:#606">persistentVolumeClaim</span>:
            <span style="color:#606">claimName</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">log-pvc-[student-name]</span></span>
  <span style="color:#606">containers</span>:
  - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: alpine</span></span>
    <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alpine</span></span>
    <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span>
    <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["/bin/sh"]</span></span>
    <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["-c", "while true; do date &gt;&gt; /etc/kal-directory/date-file.txt; sleep 5; done"]</span></span>
    <span style="color:#606">volumeMounts</span>:
      - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: log-date-vol</span></span>
        <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/etc/kal-directory</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/volumes/pv-1.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/volumes/pvc-1.yaml
kubectl apply -f ~/workspace/kubernetes-manifests/competencies/volumes/pod-1.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po alpine</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl exec -it alpine -- cat /etc/kal-directory/date-file.txt</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po alpine
kubectl delete pvc log-pvc-[student-name]
kubectl delete pv log-pv-[student-name]</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
<li>
<p>Re-design the pod that was created in  Multicontainer section: Exercise 3, such that the written files will be mounted on Persistent Volume.
Create required Persistent Volume and Persistent Volume Claim. Storage capacity of Persistent Volume shoud not exceed 500M</p>
<details>
<summary class="title">Click to see Notes</summary>
<div class="content">
<div class="paragraph">
<p>Create  <code>~/workspace/kubernetes-manifests/competencies/volumes/pod-2.yaml</code> file with the below content and <strong>modify the manifest to use PV &amp; PVC</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"><span style="color:#606">apiVersion</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">v1</span></span>
<span style="color:#606">kind</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">Pod</span></span>
<span style="color:#606">metadata</span>:
  <span style="color:#606">labels</span>:
    <span style="color:#606">run</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">multi-container-pod</span></span>
  <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">multi-container-pod</span></span>
<span style="color:#606">spec</span>:
  <span style="color:#606">volumes</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: shared-vol</span></span>
      <span style="color:#606">emptyDir</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">{}</span></span>
  <span style="color:#606">containers</span>:
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: ubuntu</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">ubuntu</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["/bin/sh"]</span></span>
      <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["-c", "while true; do date &gt; /logs/output.txt; free -tw --giga &gt;&gt; /logs/output.txt; sleep 10; done"]</span></span>
      <span style="color:#606">volumeMounts</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: shared-vol</span></span>
          <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/logs</span></span>
    - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">image: alpine</span></span>
      <span style="color:#606">name</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">alpine</span></span>
      <span style="color:#606">imagePullPolicy</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">IfNotPresent</span></span>
      <span style="color:#606">command</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["/bin/sh"]</span></span>
      <span style="color:#606">args</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">["-c", "while true; do echo  'Date: ' $(cat /logs/output.txt |  head -1) &gt; /logs/report.txt; echo 'Total Memory:' $(cat /logs/output.txt |  grep Total: | tr -s ' ' | cut -d ' ' -f 2) GB &gt;&gt; /logs/report.txt; echo 'Free Memory:' $(cat /logs/output.txt |  grep Total: | tr -s ' ' | cut -d ' ' -f 3) GB &gt;&gt; /logs/report.txt; sleep 10; done"]</span></span>
      <span style="color:#606">volumeMounts</span>:
        - <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">name: shared-vol</span></span>
          <span style="color:#606">mountPath</span>: <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#D20">/logs</span></span></code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl apply -f ~/workspace/kubernetes-manifests/competencies/volumes/pod-2.yaml</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl get po multi-container-pod</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl exec -it multi-container-pod -c alpine -- cat /logs/report.txt</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell script">kubectl delete po  multi-container-pod</code><button class="copy-button" style="background: none; border: none; float: right; text-decoration-color: black;"> <img src="./Pod Design_files/clipboard.svg" width="25" height="30"></button></pre>
</div>
</div>
</div>
</details>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<script src="./Pod Design_files/jquery-3.5.1.min.js"></script>
<script src="./Pod Design_files/copy.js"></script>

</body></html>